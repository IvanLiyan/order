function packRequest(e,t){// 组装（返回Object）
var e=JSON.stringify(e);return e=AES.encryptByDES(e,t.systemDate+""),jsonObj={requestHeader:t,requestBody:e},jsonObj}function RequestHeader(e){this.serviceCode=e.serviceCode,e.transCode&&(this.transCode=e.transCode||""),this.softTerminalId=e.softTerminalId?e.softTerminalId:"T-WEB",this.productId=e.productId?e.productId:"CHARGE",this.interfaceVersion=e.interfaceVersion?e.interfaceVersion:"1.0.0",this.softTerminalVersion=e.softTerminalVersion?e.softTerminalVersion:"2.0.0",this.systemDate=getDateString(new Date)}function getDateString(e,t){function s(e){return e<10?"0"+e:""+e}t||(t={});var r=e.getFullYear(),n=s(e.getMonth()+1),o=s(e.getDate()),a=s(e.getHours()),i=s(e.getMinutes()),d=s(e.getSeconds());e.getMilliseconds();t.tokenY&&t.tokenY;return t.tokenH&&t.tokenH,r+n+o+a+i+d}function loadRequest(e){var t=e.header,s=new RequestHeader(t);s=$.extend(!0,{},s,e.header);for(var r in s)""===s[r]&&delete s[r];return packRequest(e.body||{},s)}function unAes(e){var t=e.response.responseHeader.systemDate,s=e.response.responseBody,r=e.response.responseHeader,n=r.returnStatus,o=s.replace(/\r*\n*/g,"");if(s=AES.decryptByDES(o,t+""),regexp=new RegExp(String.fromCharCode(9)+"|\t|\\t|\\\t|\\\\t","g"),s=JSON.parse(s&&s.replace(regexp," "))||{},1!=n){var a=r.returnDesc;mui.toast(a,{duration:"short",type:"div"})}return"DMSInfoGetMessage"===serviceCode&&hideLoading(),s}function request(e,t,s){if("DMSInfoGetMessage"===(serviceCode=t.header.serviceCode));var r=loadRequest(t);mui.ajax(e,{data:r,dataType:"json",type:"post",timeout:5e3,headers:{"Content-Type":"application/json;charset=UTF-8"},success:function(e){s(e.response.responseBody)},error:function(e,t,s){"DMSInfoGetMessage"===serviceCode&&hideLoading(),mui.toast("数据获取失败",{duration:"short",type:"div"})}})}function showLoading(){mask=mui.createMask(),mask.show(),$(".mui-backdrop").html('<div id="loading"></div>')}function hideLoading(){mask.close()}var serviceCode,mask;